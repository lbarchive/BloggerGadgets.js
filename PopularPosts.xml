<b:widget id='PopularPosts1' locked='false' title='Popular Posts' type='PopularPosts'>
<b:includable id='main'>
  <b:if cond='data:title'><h2><data:title/></h2></b:if>
  <div class='widget-content popular-posts'>
    <ul expr:id='data:widget.instanceId + &quot;_PopularPosts&quot;'></ul>
        <b:if cond='data:showThumbnails == &quot;false&quot;'>
          <b:if cond='data:showSnippets == &quot;false&quot;'>
            <!-- (1) No snippet/thumbnail -->
            <script>
              (function(){
                function _(href, title) {
                  return $('<a/>', {href: href, html: title});
                }
                $("#<data:widget.instanceId/>_PopularPosts")<b:loop values='data:posts' var='post'>
                  .append($('<li/>').append(_("<data:post.href/>", "<data:post.title/>")))</b:loop>
              })();
            </script>
          <b:else/>
            <!-- (2) Show only snippets -->
            <script>
              (function(){
                function _(href, title) {
                  return $('<div/>', {class: 'item-title'})
                         .append($('<a/>', {href: href, html: title}));
                }
                function _s(snippet) {
                  return $('<div/>', {class: 'item-snippet', html: snippet});
                }
                $("#<data:widget.instanceId/>_PopularPosts")<b:loop values='data:posts' var='post'>
                  .append($('<li/>').append(_("<data:post.href/>", "<data:post.title/>"), _s("<data:post.snippet/>")))</b:loop>
              })();
            </script>
          </b:if>
        <b:else/>
          <b:if cond='data:showSnippets == &quot;false&quot;'>
            <!-- (3) Show only thumbnails -->
            <script>
              (function(){
                function _(href, title) {
                  return $('<div/>', {class: 'item-title'})
                         .append($('<a/>', {href: href, html: title}));
                }
                function _thumb(href, height, width, src) {
                  var $a = $('<a/>', {href: href, target: '_blank'})
                           .append($('<img/>', {alt: '', border: '0', height: height, width: width, src: src}));
                  return $('<div/>', {class: 'item-thumbnail'}).append($a);
                }
                function _s(snippet) {
                  return $('<div/>', {class: 'item-snippet', html: snippet});
                }
                $("#<data:widget.instanceId/>_PopularPosts")<b:loop values='data:posts' var='post'>
                  .append($('<div/>', {class: 'item-thumbnail-only'})
                    .append($('<li/>').append(<b:if cond='data:post.thumbnail'>
                      _thumb("<data:post.href/>", "<data:thumbnailSize/>", "<data:thumbnailSize/>", "<data:post.thumbnail/>"),</b:if>
                      _("<data:post.href/>", "<data:post.title/>"))))
                  .append($('<div/>').css('clear', 'both'))</b:loop>
              })();
            </script>
          <b:else/>
            <!-- (4) Show snippets and thumbnails -->
            <script>
              (function(){
                function _(href, title) {
                  return $('<div/>', {class: 'item-title'})
                         .append($('<a/>', {href: href, html: title}));
                }
                function _thumb(href, height, width, src) {
                  var $a = $('<a/>', {href: href, target: '_blank'})
                           .append($('<img/>', {alt: '', border: '0', height: height, width: width, src: src}));
                  return $('<div/>', {class: 'item-thumbnail'}).append($a);
                }
                function _s(snippet) {
                  return $('<div/>', {class: 'item-snippet', html: snippet});
                }
                $("#<data:widget.instanceId/>_PopularPosts")<b:loop values='data:posts' var='post'>
                  .append($('<div/>', {class: 'item-content'})
                    .append($('<li/>').append(<b:if cond='data:post.thumbnail'>
                      _thumb("<data:post.href/>", "<data:thumbnailSize/>", "<data:thumbnailSize/>", "<data:post.thumbnail/>"),</b:if>
                      _("<data:post.href/>", "<data:post.title/>"),
                      _s("<data:post.snippet/>"))))
                  .append($('<div/>').css('clear', 'both'))</b:loop>
              })();
            </script>
          </b:if>
        </b:if>
    <b:include name='quickedit'/>
  </div>
</b:includable>
</b:widget>
